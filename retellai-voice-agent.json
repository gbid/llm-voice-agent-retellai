{
  "agent_id": "",
  "channel": "voice",
  "last_modification_timestamp": 1754573828931,
  "agent_name": "Simple Delivery Rescheduler",
  "response_engine": {
    "type": "conversation-flow",
    "version": 0,
    "conversation_flow_id": "conversation_flow_cf917fd21b25"
  },
  "language": "en-US",
  "opt_out_sensitive_data_storage": false,
  "opt_in_signed_url": false,
  "version": 0,
  "is_published": false,
  "post_call_analysis_model": "gpt-4o-mini",
  "voice_id": "11labs-Cimo",
  "max_call_duration_ms": 600000,
  "interruption_sensitivity": 0.8,
  "allow_user_dtmf": true,
  "user_dtmf_options": {},
  "retellLlmData": null,
  "conversationFlow": {
    "conversation_flow_id": "conversation_flow_cf917fd21b25",
    "version": 0,
    "global_prompt": "You are a helpful delivery rescheduling assistant. Always collect both tracking number and postal code before attempting verification. Guide customers through the rescheduling process step by step.",
    "nodes": [
      {
        "instruction": {
          "type": "static_text",
          "text": "Hello! I'm here to help you reschedule your delivery. Please provide your tracking number and postal code."
        },
        "name": "Welcome",
        "edges": [
          {
            "condition": "User provides tracking info",
            "id": "edge-1",
            "transition_condition": {
              "type": "prompt",
              "prompt": "User mentions tracking number and postal code"
            },
            "destination_node_id": "confirm-details"
          }
        ],
        "start_speaker": "agent",
        "id": "welcome",
        "type": "conversation",
        "display_position": {
          "x": -117.89410324926564,
          "y": 326.05900401332826
        }
      },
      {
        "name": "Confirm Details",
        "edges": [
          {
            "condition": "User confirms details",
            "id": "edge-confirm",
            "transition_condition": {
              "type": "prompt",
              "prompt": "User confirms or says yes or agrees"
            },
            "destination_node_id": "verify-package"
          }
        ],
        "id": "confirm-details",
        "type": "conversation",
        "display_position": {
          "x": 246.8692622341208,
          "y": 332.4479412914363
        },
        "instruction": {
          "type": "prompt",
          "text": "Read back the tracking number and postal code that the customer provided to confirm you understood correctly. Ask them to confirm if the details are correct before proceeding with the lookup."
        }
      },
      {
        "tool_id": "verify-package-tool",
        "name": "Verify Package",
        "edges": [
          {
            "condition": "Package verified",
            "id": "edge-2",
            "transition_condition": {
              "type": "prompt",
              "prompt": "You got back a response object describing the package delivery."
            },
            "destination_node_id": "ask-time"
          },
          {
            "destination_node_id": "pre-escalate",
            "id": "edge-1754571264566",
            "transition_condition": {
              "type": "prompt",
              "prompt": "You got back a response describing some error."
            }
          }
        ],
        "id": "verify-package",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 692.5157358114631,
          "y": 339.5338972600135
        },
        "wait_for_result": true
      },
      {
        "name": "Ask New Time",
        "edges": [
          {
            "condition": "User provides time preference",
            "id": "edge-4",
            "transition_condition": {
              "type": "prompt",
              "prompt": "User mentions a time preference like morning, afternoon, or specific day"
            },
            "destination_node_id": "reschedule"
          }
        ],
        "id": "ask-time",
        "type": "conversation",
        "display_position": {
          "x": 1043.2310826378728,
          "y": 163.68528377073793
        },
        "instruction": {
          "type": "static_text",
          "text": "Great! Your package is verified. When would you like to reschedule your delivery? Please say 'tomorrow morning', 'tomorrow afternoon', or 'Saturday morning'."
        }
      },
      {
        "tool_id": "reschedule-tool",
        "name": "Reschedule",
        "edges": [
          {
            "condition": "Reschedule successful",
            "id": "edge-5",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Rescheduling was successful"
            },
            "destination_node_id": "confirm"
          },
          {
            "condition": "Reschedule failed",
            "id": "edge-6",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Rescheduling failed or error occurred"
            },
            "destination_node_id": "pre-escalate"
          }
        ],
        "id": "reschedule",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 1392.2727808304905,
          "y": 183.31563934029032
        },
        "wait_for_result": true
      },
      {
        "name": "Confirm",
        "edges": [
          {
            "condition": "User confirms",
            "id": "edge-7",
            "transition_condition": {
              "type": "prompt",
              "prompt": "User confirms or says yes or sounds satisfied"
            },
            "destination_node_id": "success"
          },
          {
            "condition": "User declines",
            "id": "edge-8",
            "transition_condition": {
              "type": "prompt",
              "prompt": "User declines, says no, or wants to change"
            },
            "destination_node_id": "pre-escalate"
          }
        ],
        "id": "confirm",
        "type": "conversation",
        "display_position": {
          "x": 1810.772521509176,
          "y": 171.05282265781025
        },
        "instruction": {
          "type": "prompt",
          "text": "Confirm the rescheduling details with the customer based on the successful reschedule response you received. Tell them the specific new delivery time and ask if they're satisfied with this new schedule."
        }
      },
      {
        "name": "Pre-Escalate Explanation",
        "edges": [
          {
            "condition": "Continue to escalation",
            "id": "edge-pre-escalate",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Always transition immediately after delivering the explanation"
            },
            "destination_node_id": "escalate"
          }
        ],
        "id": "pre-escalate",
        "type": "conversation",
        "display_position": {
          "x": 1200,
          "y": 800
        },
        "instruction": {
          "type": "prompt",
          "text": "Explain to the customer what went wrong based on the error you encountered. Apologize for not being able to complete their request. Tell them you're sending their case to our support team via email, that a human agent will review their situation and contact them with next steps, and that you'll end the call now. After delivering this explanation, immediately proceed to escalate without waiting for user response."
        }
      },
      {
        "tool_id": "escalate-tool",
        "name": "Escalate",
        "edges": [
          {
            "condition": "Escalation complete",
            "id": "edge-9",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Escalation processed"
            },
            "destination_node_id": "end-call"
          }
        ],
        "id": "escalate",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 1620.877068702348,
          "y": 1015.7514052451875
        },
        "wait_for_result": true
      },
      {
        "name": "Success",
        "edges": [
          {
            "condition": "End call",
            "id": "edge-10",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Conversation complete"
            },
            "destination_node_id": "end-call"
          }
        ],
        "id": "success",
        "type": "conversation",
        "display_position": {
          "x": 2207.1662476129,
          "y": 165.5217435452264
        },
        "instruction": {
          "type": "prompt",
          "text": "Thank the customer for their call and confirm that their delivery has been successfully rescheduled. Remind them they'll receive a confirmation email with the details and provide a warm, professional closing to end the call."
        }
      },
      {
        "name": "End Call",
        "id": "end-call",
        "type": "end",
        "display_position": {
          "x": 2202.2195889133422,
          "y": 940.1561340815947
        },
        "instruction": {
          "type": "static_text",
          "text": "Thank you for calling. Have a great day!"
        }
      }
    ],
    "start_node_id": "welcome",
    "start_speaker": "agent",
    "tools": [
      {
        "name": "verify_package",
        "description": "Verify package ownership using tracking number and postal code",
        "tool_id": "verify-package-tool",
        "type": "custom",
        "parameters": {
          "type": "object",
          "properties": {
            "postal_code": {
              "type": "string",
              "description": "Customer postal code"
            },
            "tracking_number": {
              "type": "string",
              "description": "Package tracking number"
            }
          },
          "required": [
            "tracking_number",
            "postal_code"
          ]
        },
        "url": "https://5abb81e0ed13.ngrok-free.app/api/functions/verify_package"
      },
      {
        "name": "reschedule",
        "description": "Reschedule package delivery to new time",
        "tool_id": "reschedule-tool",
        "type": "custom",
        "parameters": {
          "type": "object",
          "properties": {
            "postal_code": {
              "type": "string",
              "description": "Customer postal code"
            },
            "target_time": {
              "type": "string",
              "description": "Target delivery time (e.g. '2025-08-10T14:00:00')"
            },
            "tracking_number": {
              "type": "string",
              "description": "Package tracking number"
            }
          },
          "required": [
            "tracking_number",
            "postal_code",
            "target_time"
          ]
        },
        "url": "https://5abb81e0ed13.ngrok-free.app/api/functions/reschedule"
      },
      {
        "name": "escalate",
        "description": "Escalate to human agent when unable to help",
        "tool_id": "escalate-tool",
        "type": "custom",
        "parameters": {
          "type": "object",
          "properties": {
            "postal_code": {
              "type": "string",
              "description": "Customer postal code if available"
            },
            "tracking_number": {
              "type": "string",
              "description": "Package tracking number if available"
            }
          },
          "required": [
            "tracking_number",
            "postal_code"
          ]
        },
        "url": "https://5abb81e0ed13.ngrok-free.app/api/functions/escalate"
      }
    ],
    "model_choice": {
      "type": "cascading",
      "model": "gpt-4.1"
    },
    "knowledge_base_ids": [],
    "begin_tag_display_position": {
      "x": -243.45640019163775,
      "y": 333.3619853228591
    },
    "is_published": false
  },
  "llmURL": null
}